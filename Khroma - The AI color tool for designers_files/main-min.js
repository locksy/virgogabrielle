!function(){let e;const t=synaptic.Network,o=synaptic.Trainer,n=synaptic.Architect,r="0123456789qwertyuiopasdfghjklzxcvbnm".split(""),i=12,c=$("grid"),a=$("spacer"),s=$("colorDetail"),l=$("colorSearch"),u=$("searchAffordance"),d=["type","poster","gradient","image","palette","favorites"],f=[" with "," and "," on "," & "," + "],m=[],g=[],p={rate:.01,iterations:1e4,error:1e-6,log:100,shuffle:!0,cost:o.cost.MSE,schedule:{every:100,do:function(e){W(e)}}},h=new Pizazz({size:18,buffer:10,spacing:10,speed:1,stroke:"tomato",strokeWidth:1}),b=new Pizazz({size:18,buffer:10,spacing:10,speed:1,stroke:"#000",strokeWidth:1}),y=new Pizazz({size:18,buffer:10,spacing:15,speed:1,stroke:"#000",strokeWidth:2});let v,w,k,S,A,q,x,L,E,C,T=[],I=!1,N=!1,K=!1,z=!1,B=0,F=!1,_="type";const M={network:v,customImage:!1,theme:"light",favorites:[],hasSeenPromo:!1,wcagLimit:!1,chromatic:!0,biases:{a:.5,b:.5}},R=function(t){const o=t.data;F=!1,g.push(...o.colors),e.biases=o.biases,he(e.biases)},j=function(){(E=new Worker("../scripts/app/worker.js")).onmessage=R},D=function(t){this.amt=t,this.state=e,this.template=_,this.query=w},O=function(e){let t=new D(e);F=!0,E.postMessage(JSON.stringify(t))},H=function(){L=window.pageYOffset,Ae()},P=function(e,t,o){const n=`pointer-events: ${t};`;document.body.setAttribute("style",`overflow-y: ${e}; cursor: ${o};`),c.setAttribute("style",n),document.querySelector(".header").setAttribute("style",n)},G=function(e){let t;P("hidden","none","wait"),showLoader(),$e(),se(),O(100);const o=new Promise((function(e){t=setInterval((function(){g.length>=100&&e()}),100)}));o.then((function(){const o=[...c.querySelectorAll(".color-pair-group")];clearInterval(t),a.setAttribute("style","height: 0"),c.classList.remove("show"),window.removeEventListener("scroll",H,!1),setTimeout((function(){let t;(document.scrollingElement?document.scrollingElement:document.body).scrollTop=0,window.scrollY=0,o.forEach((function(e){c.removeChild(e)})),c.classList.add("show"),e(),hideLoader(),P("auto","auto","auto"),window.addEventListener("scroll",H,!1)}),10)}))},U={detail:function(e){const t=function(e){return toHTML(`<div class="color-detail">\n        <div class="flex-row">\n          <div class="color-round" style="background-color: rgb(${e})"></div>\n          <h3 class="copyable cd-info">${getColorName(e)}</h3>\n        </div>\n        <span>HEX: <span class="copyable cd-info">#${Khroma.convert("rgb","hex")(e).toUpperCase()}</span></span>\n        <br>\n        <span>RGB: <span class="copyable cd-info">rgb(${e})</span></span>\n        <br>\n        <span class="flex-row cd-info bias-rating">BIAS: ${(100*v.activate(Khroma.convert("rgb","frgb")(e))[0]).toFixed(0)}%</span>\n      </div>`)};var o=function(){const o=document.createDocumentFragment();for(let n of e)o.appendChild(t(n));s.querySelector(".color-details").appendChild(o)};if(s.querySelector(".color-details").innerHTML="",o(),"palette"!==_){const t=checkContrast(Khroma.convert("rgb","hex")(e[0]),Khroma.convert("rgb","hex")(e[1]));s.querySelector(".color-details").innerHTML+=`<span>WCAG Ratio: ${t.rating} (${t.ratio}:1)</span>`}},gradient:function(t,o){const n=t[0],r=t[1],i=o||document.importNode(document.getElementById("gradient_template").content.querySelector(".color-pair"),!0);if(e.chromatic){const e=Khroma.convert("rgb","lab")(n),t=Khroma.convert("rgb","lab")(r);let o=getAveRgb(e,t),c=getAveRgb(e,t,!0),a=getAveRgb(e,o,!0),s=getAveRgb(t,o,!0);i.setAttribute("style",`background: linear-gradient(rgb(${n}), rgb(${a}), rgb(${c}), rgb(${s}), rgb(${r}))`)}else i.setAttribute("style",`background: linear-gradient(rgb(${n}), rgb(${r})); color: rgb(${r});`);return i.setAttribute("data-index",B),i.querySelector(".swap").onclick=function(e){ge(e)},i.querySelector(".copy-code").onclick=function(e){ce(e)},i},image:function(t,o){const n=J(),r=o||document.importNode(document.getElementById("image_template").content.querySelector(".color-pair"),!0);return r.setAttribute("data-index",B),r.querySelector(".cp-bg-image").setAttribute("style",`-webkit-filter: url(#${n}); filter: url(#${n}); ${e.customImage?`background: url(${e.customImage}) no-repeat`:""}; background-size: cover;`),r.querySelector("filter").setAttribute("id",n),r.querySelector("feColorMatrix").setAttribute("values",convertToDuoTone(t,e.customImage)),r.querySelector(".swap").onclick=function(e){ge(e)},r.querySelector(".copy-code").onclick=function(e){ce(e)},r},type:function(e,t){const o=e[0],n=e[1],r=getColorName(o),i=getColorName(n),c=t||document.importNode(document.getElementById("type_template").content.querySelector(".color-pair"),!0);return c.setAttribute("style",`background-color: rgb(${o}); color: rgb(${n});`),c.querySelector("h1").innerText=r,c.querySelector("h2").innerText=`& ${i} â€”`,c.querySelector("p").innerText=`The quick, brown, ${r.toLowerCase()}, and ${i.toLowerCase()} fox jumped over the lazy dog.`,c.querySelector(".footnote").innerText=`${B+1}`,c.querySelector(".swap").onclick=function(e){ge(e)},c.setAttribute("data-index",B),c},poster:function(e,t){const o=e[0],n=e[1],r=[Math.round((o[0]+n[0])/2),Math.round((o[1]+n[1])/2),Math.round((o[2]+n[2])/2)],i=t||document.importNode(document.getElementById("poster_template").content.querySelector(".color-pair"),!0),c=i.querySelectorAll(".poster-panel");return c[0].setAttribute("style",`background-color: rgb(${o});`),c[1].setAttribute("style",`background-color: rgb(${n})`),i.querySelector(".poster-description").innerHTML=`${getColorName(o)} <br> & ${getColorName(n)}`,i.setAttribute("data-index",B),i},palette:function(e,t){const o=e,n=t||document.importNode(document.getElementById("palette_template").content.querySelector(".color-pair"),!0),r=[...n.querySelectorAll(".poster-panel")];return r.forEach((function(e,t){e.setAttribute("style",`background-color: rgb(${o[t]});`)})),n.setAttribute("data-index",B),n},ad:function(e,t){const o=e[0],n=e[1],r=t||document.importNode(document.getElementById("ad").content.querySelector(".color-pair"),!0),i=r.querySelector("#carbonads");return i&&t?"undefined"!=typeof _carbonads&&_carbonads.refresh():r.appendChild(document.importNode(document.getElementById("ad_script").content,!0)),r}},W=function(e){const t=e.iterations/p.iterations;showLoader(`Training: ${(100*t).toFixed(0)}% <span id="percentComplete">Accuracy: ${(100*(1-e.error)).toFixed(2)}%</span>`)},J=function(){let e="";for(let t=0;t<10;t++){const t=genRandomNumber(0,r.length-1);e+=r[t]}return e},Y=function(t,o){const n=document.querySelector(".toaster");clearTimeout(q),clearTimeout(x),n.innerText=t,n.classList.add("show"),q=setTimeout((function(){y.stroke="light"===e.theme?"#000":"#fff",y.play(n)}),250),x=setTimeout((function(){n.classList.remove("show")}),o)},X=function(e,t){if("initial"===e){const e=t.match(/^[ \t]*(?=\S)/gm);if(null===e)return t;const o=Math.min(...e.map(e=>e.length)),n=new RegExp("^[ \\t]{"+o+"}","g;m");t=o>0?t.replace(n,""):t}else{if("all"!==e)throw new Error(`Unknown type: ${e}`);t=t.split("\n").map(e=>e.trimLeft()).join("\n")}return t},Q=function(){const t=this.parentNode.parentNode,o=t.getAttribute("data-index");let n=e.favorites;if(t.querySelector(".favorited")){const o=t.getAttribute("favorite-id");this.classList.toggle("favorited"),I&&(t.remove(),tippet.hide());const r=new Set([o]),i=n.filter(e=>!r.has(e.id));e.favorites=i}else{const e={id:J(),type:_,colors:[...m[o]]};n.push(e),t.setAttribute("favorite-id",e.id),this.classList.add("favorited"),h.play(this),ga("set","metric1",n.length)}N=!0,!e.hasSeenPromo&&e.favorites.length>3&&(Ve(),e.hasSeenPromo=!0),et()},V=function(){A=this,this.style.pointerEvents="none",this.style.opacity=0},Z=function(){this.style.opacity=1,this.style.pointerEvents="auto"},ee=function(){const t=[...c.querySelectorAll(".color-pair")],o=t.indexOf(event.currentTarget),n=t.indexOf(A);o<n?this.parentNode.insertBefore(A,event.currentTarget):this.parentNode.insertBefore(A,event.currentTarget.nextSibling),e.favorites=arrayMove(e.favorites,n,o),et()},te=function(e,t){const o=U[e="favorites"===e?"type":e](t);return"ad"!==e&&(o.querySelector(".info").onclick=ae,o.querySelector(".heart").onclick=Q),o},oe=function(e){const t=document.createElement("div"),o=document.createDocumentFragment(),n="palette"===_?4:2;t.classList.add("color-pair-group","animate-render");for(let o=0;o<e;o++){const e=me(n),o=te(3===B?"ad":_,e);m.push(e),t.appendChild(o),B+=1}o.appendChild(t),c.appendChild(o),tippet.update(),S=t.clientHeight,setTimeout((function(){t.classList.remove("animate-render")}),500)},ne=function(){const t=document.createElement("div"),o=document.createDocumentFragment();t.classList.add("color-pair-group","animate-render"),e.favorites.forEach((function(e,n){"favorite"===e.type&&(e.type="type");const r=te(e.type,e.colors),i=r.querySelector(".heart");r.setAttribute("favorite-id",e.id),r.setAttribute("data-index",n++),r.setAttribute("draggable",!0),r.ondrag=V,r.ondragenter=ee,r.ondragend=Z,i.classList.add("favorited"),i.setAttribute("data-tippet","Unfavorite"),t.appendChild(r),o.appendChild(t),m.push(e.colors)})),c.appendChild(o),setTimeout((function(){t.classList.remove("animate-render")}),500),tippet.update()},re=function(e){const t=d.indexOf(e);document.querySelector(".nav-item.active").classList.remove("active"),document.querySelector(`.nav-item:nth-child(${t+1})`).classList.add("active")},ie=function(e){const t=function(){let e=document.querySelector("#copyInput");return null===e?((e=document.createElement("textarea")).setAttribute("id","copyInput"),e.setAttribute("style","position: absolute; left: -999em;"),document.body.appendChild(e)):(e.style.position="absolute",e.style.left="-999em"),e};let o=t(),n=e.target?e.target.innerText:e;o.value=n.toLowerCase(),o.select(),document.execCommand("copy"),Y("Copied to clipboard!",3e3)},ce=function(t){let o;b.play(t.target);let n=_;const r=t.target.parentNode.parentNode;if("favorites"===_){const t=r.getAttribute("data-index");n=e.favorites[t].type}if("gradient"===n){const e=r.style.background;o=`background: ${e};`}if("image"===n){const e=r.querySelector(".cp-bg-image").style.webkitFilter,t=String(r.querySelector("svg").outerHTML);o=X("all",`//CSS\n    filter: ${e};\n    -webkit-filter: ${e};\n\n    //HTML\n    ${t}`)}ie(o)},ae=function(){const e=this.parentNode.parentNode,t=e.getAttribute("data-index"),o=document.querySelector(".color-detail-container");e.appendChild(o),U.detail(m[t]),o.classList.add("show");let n=o.querySelectorAll(".copyable");for(let e of n)e.onclick=ie},se=function(){const e=document.querySelector(".color-detail-container");e.classList.remove("show"),document.body.appendChild(e)},le=function(){$("settings").classList.remove("hidden")},ue=function(){$("settings").classList.add("hidden")},de=function(){$("searchTips").classList.add("hidden")},fe=function(){$("searchTips").classList.remove("hidden")},me=function(e){const t=[];for(let o=0;o<e;o++){if(void 0===g[B])return!1;t.push(g[B][o])}return t},ge=function(t){let o,n=t.target;if(!n.classList.contains("color-pair"))for(;(n=n.parentElement)&&!n.classList.contains("color-pair"););const r=n.getAttribute("data-index");let i=m[r],c=[i[1],i[0]],a=_;"favorites"===a&&(a=e.favorites[r].type,i=e.favorites[r].colors,e.favorites[r].colors=c),n=U[a](c,n),m[r]=c,n.setAttribute("data-index",r),b.play(t.target),et()},pe=function(e){let t=getTertiaryColor(...e);for(;v.activate(Khroma.convert("rgb","hsv")(t))[0]<.5;){let e=Khroma.convert("rgb","hsl")(t);e[0]+=genRandomFloat(-.01,.01),e[1]+=genRandomFloat(-.01,.01),e[2]+=genRandomFloat(-.01,.01),t=Khroma.convert("hsl","rgb")(e)}return t},he=function(t){if(t)for(let e in t){const o=t[e];$(`bias_${e}`).value=(100*o).toFixed(0)}else e.biases.a=$("bias_a").value/100,e.biases.b=$("bias_b").value/100},be={init:function(){const e=function(e,t){let o=!1,n=0,r=e.value;t=t||1,e.setAttribute("readonly",!0),e.setAttribute("style","appearance: textfield; -webkit-appearance: textfield");const i=function(i){if(o){const o=+r-(+n-+i.pageX)*t,c=e.getAttribute("max"),a=e.getAttribute("min");o>=a&&o<=c&&(e.value=o.toFixed(0))}},c=function(){o=!1,e.value!==r&&(he(),et(),w||qe()),r=e.value,document.body.removeEventListener("mousemove",i),document.body.removeEventListener("mouseup",c)};e.onmousedown=function(t){o=!0,n=t.pageX,r=e.value,document.body.onmouseup=c,e.onmouseout=c,e.onmousemove=i,e.onmouseup=c}},t=[...document.querySelectorAll("input[data-scrubby]")];t.forEach((function(t){e(t,1)}))}},ye=function(){confirm("You'll have to retrain whether you makes changes or not. Are you sure?")&&(e.network=null,et(),window.location.replace("/train"))},ve=function(e,t,o){let n=Date.now();return function(){n+t-Date.now()<0&&(e(o),n=Date.now())}},we=function(){const e=[...document.querySelectorAll(".favorited")];for(let t of e)t.classList.remove("favorited")},ke=function(e){const t=c.querySelectorAll(".color-pair-group"),o=B-24>0;let n,r,i;if("up"===e&&o){B-=24;const e=m.slice(B-12,B);i=S*(B-12)/12,a.setAttribute("style",`height: ${i}px`),(r=[...t[1].childNodes]).forEach((function(t,o){n=m[B-12],(t=t.classList.contains("ad")?U.ad(n,t):U[_](n,t)).setAttribute("data-index",m.indexOf(e[o])),B++})),c.insertBefore(t[1],t[0])}"down"===e&&(r=[...t[0].childNodes],K&&(i=S*(B-12)/12,a.setAttribute("style",`height: ${i}px`)),r.forEach((function(e,t){e.setAttribute("data-index",B),B>=m.length?(n=me("palette"===_?4:2),m.push(n)):n=m[B],e=e.classList.contains("ad")?U.ad(n,e):U[_](n,e),B++})),B+100>g.length&&!F&&O(100),c.insertBefore(t[0],t[1].nextSibling)),N&&we(),se()},Se=function(){const e=(B-24)/12,t=L>=S*(e+1),o=L<S*e&&K;I||(o?(ke("up"),B<=24&&(K=!1)):t&&(K=!0,ke("down"))),z=!1},Ae=function(){z||(requestAnimationFrame(Se),z=!0)},$e=function(){g.length=0,m.length=0,B=0,N=!1},qe=function(e){G((function(){oe(12),oe(12)})),e&&e()},xe=function(t){if("favorites"===t){if(!(e.favorites.length>0))return Y("You haven't added any favorites yet!",3e3),!1;_=t,I=!0,w=null,_e(),G((function(){ne()}))}else _=t,I=!1,qe();K=!1,re(t),ga("send","pageview")},Le=function(){const e=[...document.querySelectorAll(".bias-inputs input")];for(let t of e)t=draggableInput(t,2)},Ee=function(t){let o;o="string"==typeof t?t:"dark"===e.theme?"light":"dark",e.theme=o,et(),document.body.classList=`fixed-header-margin theme-${o}`,document.querySelector(".logo img").setAttribute("src",`../assets/images/logo_${o}.svg`),document.querySelector(".change-theme img").setAttribute("src",`../assets/icons/${o}_theme.svg`)},Ce=function(){document.getElementById("resetCustomImage").setAttribute("style","display: none"),e.customImage=!1,et(),Y("Custom image removed",3e3)},Te=function(){document.getElementById("resetCustomImage").setAttribute("style","display: block")},Ie=function(e){for(let t of f)if(e.includes(t))return e.split(t);return!1},Ne=function(){const e=l.value.toLowerCase(),t=Ie(e);if(t){let e=t;return{a:(e=e.map(e=>e.trim()))[0],b:e[1]}}return{a:e}},Ke=function(t){const o=e.biases;setTimeout((function(){const n=e.biases.a<.01&&o.a>=.01,r=e.biases.b<.01&&o.b>=.01;if(n||r){const e=n?"a":"b",o=new Acquaint([{title:"Out of range query",target:`#bias_${e}`,message:`The search term "${t[e]}" isn't in your preference range - bias ${e} has been turned to 0.`,position:"bottom-right",fixed:!0}]);o.init()}}),2e3)},ze=function(e,t){w=e,"favorites"===_?xe("type"):qe(),he(),Ke(t),De({color:"#6782b2",borderColor:"#9db7ea",cursor:"pointer"},"Esc"),u.onclick=Fe},Be=function(){const e=Ne(),t=Oe(e)||"tips"===e.a;t&&ze(He(e),e)},Fe=function(){_e(),qe()},_e=function(){l.value="",w=null,u.style.display="none"},Me=function(e){const t=Ne(),o=13===e.keyCode,n=27===e.keyCode;Pe(t),o&&(Oe(t)?ze(He(t),t):0===l.value.length?qe():"tips"===l.value?fe():(De({color:"tomato",borderColor:"tomato"},"Invalid search"),u.onclick=null)),n&&(l.value="",w=null,qe()),je(e)},Re=function(e){const t=[e.ctrlKey,e.altKey,e.shiftKey];t.forEach((function(t){if(e.keyCode===t)return!1}))},je=function(e){Re(e);let t=l.value.length;8===e.keyCode&&0===--t&&(u.style.display="none");const o=6.9*(t+2)+50;t>0?(u.style.display="block",u.style.transform=`translate3d(${o}px,0,0)`):u.style.display="none"},De=function(e,t){for(let t in e)u.style[t]=e[t];t&&u.innerText!==t&&(u.innerText=t)},Oe=function(e){let t=Khroma.generate("rgb",e.a)||Ue(e.a),o=e.b?Khroma.generate("rgb",e.b)||Ue(e.b):void 0;return t&&void 0===o||t&&o};var He=function(e){let t=!!Khroma.generate("rgb",e.a)&&e.a,o=!(!e.b||!Khroma.generate("rgb",e.b))&&e.b;return t=t||Ue(e.a),(o=e.b&&!o?Ue(e.b):o)?{a:t,b:o}:{a:t}};const Pe=function(e){Oe(e)||"tips"===e.a?(De({color:"#15CF9A",borderColor:"#15CF9A",cursor:"pointer"},"Enter"),u.onclick=Be):(De({color:"#6782b2",borderColor:"#9db7ea",cursor:"auto"},"No result"),u.onclick=null),w=null},Ge=function(e,t){const o={},n=Khroma.convert(e,"hsl")(t);return o.hue=n[0],o.sat=n[1],o.lum=n[2],o.exactMatch=!0,o},Ue=function(e){let t={};if(Je(e))t=Ge("hex",e);else if(Ye(e))t=Ge("rgb",Ye(e));else{const o=We(e);let n=0;if(!o)return!1;{const e=.025;n=360*(o[0]-e)<0?360:0;const r=360*(o[0]-e)+n,i=360*(o[0]+e)+n,c=o[1]-e<0?o[1]-e+1:o[1]-e,a=o[1]+e>1?1:o[1]+e;t.hue=[+r.toFixed(0),+i.toFixed(0)],t.sat=[+c,+a],t.lum=[o[2]-e,o[2]+e],t.namedColor=!0}}return t},We=function(e){for(let t of ntc.names)if(t[1].toLowerCase()===e){const e=Khroma.convert("hex","rgb")(`#${t[0]}`);return Khroma.convert("rgb","hsl")(e)}return!1},Je=function(e){const t=/^#[0-9A-F]{6}$/i.test(e);return!!t},Ye=function(e){const t=function(e){const t=null!==e?[+e[1],+e[2],+e[3]]:null;return!(!t||3!==t.length)&&(t.forEach(e=>{if(!(e=+e>=0&&+e<=255))return!1}),!0)};if(e.includes("rgb")){const o=/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,n=o.exec(e);return!!t(n)&&[+n[1],+n[2],+n[3]]}return!1},Xe=function(){const t=document.querySelectorAll(".nav-item"),o=document.querySelectorAll(".swap"),n=document.querySelectorAll(".copy-code");o.forEach((function(e){e.onclick=ge})),n.forEach((function(e){e.onclick=ce})),t.forEach((function(e){const t=e.getAttribute("data-tippet");e.onclick=function(){xe(t.toLowerCase())}})),document.getElementById("customImage").addEventListener("change",(function(){const t=this.files[0],o=new FileReader;o.addEventListener("load",(function(t){console.log(t),t.total<1e6?(e.customImage=t.target.result,Te(),et()):Y("Image too big, keep it under 1mb",3e3)})),o.readAsDataURL(this.files[0])}),!1),window.addEventListener("resize",(function(){S=document.querySelector(".color-pair-group").clientHeight,a.setAttribute("style",`height: ${S*(B-24)/12}px`)})),window.addEventListener("scroll",H,!1),l.onkeyup=function(e){Me(e)},l.onkeydown=function(e){je(e)},document.querySelector(".change-theme").onclick=Ee,document.querySelector(".close-detail").onclick=se,document.querySelector(".search-bar .info").onclick=fe,document.querySelector(".settings").onclick=le,$("closeTips").onclick=de,$("closeSettings").onclick=ue,$("resetColors").onclick=ye,$("downloadData").onclick=dt,$("resetCustomImage").onclick=Ce,$("chromeGrads").onclick=function(){e.chromatic=!e.chromatic,et()},$("wcagLimit").onchange=function(){e.wcagLimit=!e.wcagLimit,console.log(e.wcagLimit),et()}},Qe=function(){const e=new Pizazz({size:12,buffer:6,spacing:15,speed:1,stroke:"rgb(0, 255, 153)",strokeWidth:1,appendToElement:!0}),t=$("waitListSignUp"),o=setInterval((function(){e.play(t),e.play(t,500)}),3e3)},Ve=function(){document.querySelector(".promo-sign-up").classList.add("show"),Qe()},Ze=function(){const e=new Acquaint([{title:"Templates",target:".nav div:first-child",message:"Welcome! Khroma is essentially an infinite scroll of colors combinations. Above you can pick different templates to view your pairings.",position:"bottom-left",button:"Next",fixed:!0},{title:"Search",target:"#colorSearch",message:"You can use the search to generate specific colors, hues, tones, tints, or combinations. Read the tips for more.",position:"bottom-left",button:"Next",fixed:!0},{title:"Bias",target:"#bias_a",message:"Bias controls the % to which the generated colors are limited to ones you like. High bias is more accurate, low is more diverse.",position:"bottom-right",button:"Next",fixed:!0},{title:"Settings",target:".settings",message:"If you don't like your results, you can edit your picks and retrain your generator.",position:"bottom-right",button:"Got it",fixed:!0}]);e.completeMessage="Enjoy Khroma!",e.init()},et=function(){localforage.setItem("state",e)},tt=function(e,t){return e.forEach((function(e){e.input=Khroma.convert("rgb",t)(e.input)})),e},ot=function(e,t){return{input:e,output:[t]}},nt=function(e){let t=0,o=100;return C.forEach((function(n){let r,i=new dE00(formatDeltaE(e),formatDeltaE(n)).getDeltaE();t=i>t?i:t,o=i<o?i:o})),[o,t]},rt=function(e){let t;const o=function(e,t,o){const n=function(t){return"likes"===e?nt(t)[0]>3:nt(t)[0]<6};for(let r=0;r<t;r++){let t=Khroma.generate("rgb"),r=0;for(;n(t);){if(t=Khroma.generate("rgb"),r>1e3)return void("likes"===e&&console.log(n(t)));r++}T.push(ot(Khroma.convert("rgb","frgb")(t),o))}};o("likes",1500,1),o("dislikes",7500,0);const n=new Promise((function(e){t=setInterval((function(){T.length>=9e3&&e()}),250)}));n.then((function(){clearInterval(t),e.callback&&e.callback()}))},it=function(){var e;document.querySelector(".bl-container").setAttribute("style","display: table"),new o(v).trainAsync(k,p).then(e=>at(e))},ct=function(){j(),Ee(e.theme),be.init(),qe(Xe),e.customImage&&Te(),e.chromatic&&($("chromeGrads").checked=!0),e.wcagLimit&&($("wcagLimit").checked=!0)},at=function(t){e.network=v.toJSON(),et(),ct(),Ze(),document.querySelector(".bl-container").setAttribute("style","display: none"),document.querySelector(".header").setAttribute("style","display: flex")},st=function(){localforage.getItem("selected_colors").then((function(e){e?(C=e,rt({callback:function(){lt()}})):(window.location="/train",Y("No training data detected",2e3))})).catch((function(e){Y("Error loading the training data",2e3),console.log("Error loading the training data",e)}))},lt=function(){k=T,v=new n.Perceptron(3,15,5,1),it()},ut=function(){localforage.config(),localforage.getItem("state").then((function(o){o?null===(e=o).network?(document.querySelector(".header").setAttribute("style","display: none"),showLoader("Generating data"),setTimeout((function(){st()}),100)):(v=t.fromJSON(e.network),ct()):(e=Object.assign({},M),document.querySelector(".header").setAttribute("style","display: none"),showLoader("Generating data"),setTimeout((function(){st()}),100))}))},dt=function(){localforage.getItem("selected_colors").then((function(e){e?localforage.getItem("state").then((function(t){t.selectedColors=e;let o=JSON.stringify(t);const n="my_khroma_data.json";console.save=function(e,t){if(!e)return void console.error("Console.save: No data");t||(t="console.json"),"object"==typeof e&&(e=JSON.stringify(e,void 0,4));const o=new Blob([e],{type:"text/json"}),n=document.createEvent("MouseEvents"),r=document.createElement("a");r.download=t,r.href=window.URL.createObjectURL(o),r.dataset.downloadurl=["text/json",r.download,r.href].join(":"),n.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(n)},console.save(o,n)})):(Y("No training data detected",2e3),window.location="/train")})).catch((function(e){Y("Error loading the training data",2e3),console.log("Error loading the training data",e)}))};ut()}();